
@{
ViewData["Title"] = "TPM";
}

<h2>TPM Actions</h2>

<div>
    <button id="TpmSetupButton" onclick="openRequestResponse('TpmSetup')">TpmSetup</button>
    <button id="TpmClearButton" onclick="openRequestResponse('TpmClear')" disabled>TpmClear</button>
    <button id="ChangePasswordButton" onclick="openRequestResponse('ChangePassword')" disabled>ChangePassword</button>
    <button id="SealHashButton" onclick="openRequestResponse('SealHash')" disabled>SealHash</button>
    <button id="UnSealHashButton" onclick="openRequestResponse('UnSealHash')" disabled>UnSealHash</button>
    <button id="DeleteHashButton" onclick="openRequestResponse('DeleteHash')" disabled>DeleteHash</button>
    <button id="StoreEncryptionKeyButton" onclick="openRequestResponse('StoreEncryptionKey')" disabled>StoreEncryptionKey</button>
    <button id="GetEncryptionKeyButton" onclick="openRequestResponse('GetEncryptionKey')" disabled>GetEncryptionKey</button>
    <button id="DeleteEncryptionKeyButton" onclick="openRequestResponse('DeleteEncryptionKey')" disabled>DeleteEncryptionKey</button>
</div>

<div id="RequestResponseSection">
    <!-- The partial view for request/response will be loaded here -->
</div>

@section Scripts {
<script>
    function openRequestResponse(action) {
        fetch(`/TPM/HandleAction?action=${action}`)
            .then(response => response.text())
            .then(data => {
                document.getElementById('RequestResponseSection').innerHTML = data;
            });
    }

    function enableButtons() {
        const buttons = document.querySelectorAll('button[id$="Button"]');
        buttons.forEach(button => {
            if (button.id !== 'TpmSetupButton') {
                button.disabled = false;
            }
        });
    }
</script>
}
